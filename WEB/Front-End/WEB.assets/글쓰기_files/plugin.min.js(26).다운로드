!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=482)}({124:function(t,n,e){"use strict";e.d(n,"a",function(){return r});var r=function(t){return window.tinymce.settings.plugins.includes(t)}},482:function(t,n,e){"use strict";function r(t){return t.replace(/-/g,".")}function i(t){var n=new Date(t);return isNaN(n.getDate())?"":n.toLocaleDateString("ko-kr",{weekday:"short"})}e.r(n);var o=function(){function t(){}return t.prototype.getPropertyString=function(t,n){return Array.isArray(n)&&(n=n.join(", ")),null!=n&&0!==n.length||(n="-"),"<dl class='cs-info'>\n      <dt>"+t+"</dt>\n      <dd>"+n+"</dd>\n    </dl>"},t.prototype.isType=function(t){return t===this.kind},t}(),a=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),s=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="book",n}return a(n,t),n.prototype.getHTMLString=function(t){return"\n        <div class='cs-desc'>"+(t.desc||"-")+"</div>\n        <div class='cs-props'>\n        "+this.getPropertyString("저자",t.authors)+"\n        "+this.getPropertyString("출판",t.publisher)+"\n        "+this.getPropertyString("출판일",r(t.publicationDate))+"\n        </div>\n      "},n}(o)),c=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),u=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="person",n}return c(n,t),n.prototype.getHTMLString=function(t){var n=t.websites&&"\n      <object>\n        "+t.websites.slice(0,3).map(function(t){return'<a href="'+t.url+'">'+t.title+"</a>"}).join(", ")+"\n      </object>  \n      ";return"\n        <div class='cs-props'>\n        "+this.getPropertyString("직업",t.jobTitles)+"\n        "+this.getPropertyString("소속",t.memberOf)+"\n        "+this.getPropertyString("사이트",n)+"\n        </div>\n    "},n}(o));function p(t,n,e){return void 0===e&&(e=1),(t/n).toFixed(e)}var d=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),g=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="movie",n}return d(n,t),n.prototype.getHTMLString=function(t){var n=null!=t.rating?'<span class="ico-star"></span>'+p(t.rating,10)+" "+(t.releaseDate&&"("+r(t.releaseDate)+" 개봉)"):"-";return"\n      <div class='cs-desc'>"+(t.desc||"-")+"</div>\n      <div class='cs-props'>\n        "+this.getPropertyString("평점",n)+"\n        "+this.getPropertyString("감독",t.directors)+"\n        "+this.getPropertyString("출연",t.actors)+"\n      </div>"},n}(o)),l=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),f=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="tv",n}return l(n,t),n.prototype.getHTMLString=function(t){return"<div class='cs-desc'>"+(t.desc||"")+"</div>\n          <div class='cs-props'>\n          "+this.getPropertyString("시간",this.makeScheduleString(t))+"\n          "+this.getPropertyString("출연",t.actors.join(", "))+"\n          "+this.getPropertyString("채널",t.channel)+"\n          </div>\n      </div>"},n.prototype.makeScheduleString=function(t){return t.broadcastDayOfWeek.join(", ")+" "+function(t){return new Date("0 "+t).toLocaleTimeString("ko-kr",{hour12:!0,hour:"numeric",minute:"2-digit"})}(t.broadcastTime)+" "+(t.startDate?"("+t.startDate+"~"+(t.endDate||"")+")":"")},n}(o)),h=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),y=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="play",n}return h(n,t),n.prototype.getHTMLString=function(t){var n=null!=t.rating?'<span class="ico-star"></span>'+p(t.rating,10):"-",e=t.startDate?r(t.startDate)+"("+i(t.startDate)+")~":"",o=t.endDate?r(t.endDate)+"("+i(t.endDate)+")":"";return"\n      <div class='cs-desc'>"+(t.desc||"")+"</div>\n        <div class='cs-props'>\n          "+this.getPropertyString("평점",n)+"\n          "+this.getPropertyString("기간",e+o)+"\n          "+this.getPropertyString("장소",t.location)+"\n          "+this.getPropertyString("출연",t.actors)+"\n        </div>\n      </div>"},n}(o)),v=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),_=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="music",n}return v(n,t),n.prototype.getHTMLString=function(t){return"\n          <div class='cs-props'>\n          "+this.getPropertyString("아티스트",t.artist)+"\n          "+this.getPropertyString("앨범",t.albumTitle)+"\n          "+this.getPropertyString("발매일",r(t.releaseDate))+"\n          </div>\n      "},n}(o)),S=function(){var t=function(n,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(n,e)};return function(n,e){function r(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),m=new(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.kind="exhibition",n.EXHIBITION_GENRE="전시/행사",n}return S(n,t),n.prototype.getHTMLString=function(t){var n=t.startDate?r(t.startDate)+"("+i(t.startDate)+")~":"",e=t.endDate?r(t.endDate)+"("+i(t.endDate)+")":"";return"\n      <div class='cs-props'>\n        "+this.getPropertyString("장르",this.EXHIBITION_GENRE)+"\n        "+this.getPropertyString("기간",n+e)+"\n        "+this.getPropertyString("장소",t.location)+"\n      </div>"},n}(o)),T=function(){function t(t){this.CDMTypeName="contentSearch",this.parserCommandPrefix="GetHTMLByCDM_",this.insertCommandPrefix="InsertHTMLByCDM_",this.parserCommand=this.parserCommandPrefix+this.CDMTypeName,this.insertCommand=this.insertCommandPrefix+this.CDMTypeName,this.DEFAULT_IMG_SRC="../../image/noImage.png",this.editor=t}return t.prototype.register=function(){var t=this;this.editor.addCommand(this.parserCommand,function(n){var e=n.htmlArray,r=n.item,i=t.getHTMLStringByCDM(r.attribute);e.push(i)}),this.editor.addCommand(this.insertCommand,function(n){var e=t.getHTMLStringByCDM(n.attribute);t.editor.insertContent(e),function(t,n,e,r){void 0===e&&(e=!0),void 0===r&&(r=!0);var i=t.contentWindow,o=i.scrollY,a=i.innerHeight;if(t.settings.scroll_container_id){var s=(i=document.getElementById(t.settings.scroll_container_id)).getBoundingClientRect(),c=s.top,u=s.height;o=i.scrollTop||i.pageYOffset,a=u-c}var p=n.offsetTop,d=n.offsetHeight;e&&p+d>a+o?i.scrollTo(0,p+d-a):r&&p<o&&i.scrollTo(0,p)}(t.editor,t.editor.selection.getNode())})},t.prototype.getHTMLStringByCDM=function(t){var n="exhibition"===t.kind&&t.data.image?"url("+t.data.image+")":"url("+t.data.image+"), url("+this.DEFAULT_IMG_SRC+")",e='\n    <figure contenteditable="false" \n    data-ke-type="'+this.CDMTypeName+'" \n    data-ke-align="'+t.align+'" \n    data-cs-kind="'+t.kind+'">\n      <a href="'+t.data.url+'" target="_blank">\n        <div class="cs-image" style="background-image: '+n+'"></div>\n        <div class="cs-info-wrap">\n          <span class="cs-title">'+t.data.title+"</span>\n          "+this.getHTMLStringByContentType(t)+"\n        </div>\n      </a>\n    </figure>\n    ";return this.editor.dom.getOuterHTML(this.editor.$(e).attr("data-cs-data",JSON.stringify(t.data)))},t.prototype.getHTMLStringByContentType=function(t){switch(t.kind){case"book":return s.getHTMLString(t.data);case"person":return u.getHTMLString(t.data);case"movie":return g.getHTMLString(t.data);case"play":return y.getHTMLString(t.data);case"tv":return f.getHTMLString(t.data);case"music":return _.getHTMLString(t.data);case"exhibition":return m.getHTMLString(t.data);default:return this.notSupported(t)}},t.prototype.notSupported=function(t){return""},t}(),b=["alignCenter","alignLeft","alignRight"],C=function(){function t(t,n){this.editor=t,this.TARGET_NODE=n,this.postrender=this.postrender.bind(this)}return t.prototype.getTargetNode=function(){var t=this.editor.selection.getNode(),n=this.editor.$(t).closest(this.TARGET_NODE);return n&&n[0]&&n},t.prototype.setAlign=function(t){var n=this.getTargetNode();n&&n[0]&&n.attr("data-ke-align",t)},t.prototype.register=function(t,n){var e=b.find(function(t){return t===n});if(e){this.editor.addCommand(t,this.setAlign.bind(this,e));var r={alignCenter:{title:"Align center",icon:"imagealigncenter"},alignLeft:{title:"Align left",icon:"imagealignleft"},alignRight:{title:"Align right",icon:"imagealignright"}};this.editor.addButton(t,{title:r[n].title,cmd:t,icon:r[n].icon,activestate:n,onpostrender:this.postrender})}},t.prototype.postrender=function(t){var n=this,e=t.control,r=function(){var t=n.getTargetNode();if(t&&t[0]){var r=t.attr("data-ke-align");e.active(e.settings.activestate==r)}};r(),this.editor.on("nodeChange",function(t){r()})},t}(),P=function(){for(var t=0,n=0,e=arguments.length;n<e;n++)t+=arguments[n].length;var r=Array(t),i=0;for(n=0;n<e;n++)for(var o=arguments[n],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r},O=function(){function t(t){this.editor=t,this.TARGET_SELECTOR='figure[data-ke-type="contentSearch"]',this.ALLOWED_ACTIONS=P(b),this.editor=t,this.actions=[new C(t,this.TARGET_SELECTOR)],this.contextToolbarPredicate=this.contextToolbarPredicate.bind(this)}return t.prototype.contextToolbarPredicate=function(t){return this.editor.dom.is(t,this.TARGET_SELECTOR)},t.prototype.register=function(){var t=this,n=this.editor.settings.kContentSearch&&this.editor.settings.kContentSearch.toolbar;if(n&&""!==n){var e=n.split(" ").reduce(function(n,e){if(t.ALLOWED_ACTIONS.includes(e)){var r="kContentSearch"+e;return t.actions.forEach(function(t){t.register(r,e)}),P(n,[r])}if("|"===e)return P(n,["|"])},[]).join(" ");this.editor.addContextToolbar(this.contextToolbarPredicate,e)}},t}(),k=e(124),w=function(){function t(t){this.editor=t,this.kContentSearchsettings=t.settings.kContentSearch}return t.prototype.toggle=function(t){this.$container?(null==t&&(t=this.editor.dom.isHidden(this.$container)),t?this.$container.show():this.$container.hide()):this.addContainer()},t.prototype.addContainer=function(){var t=this.editor,n=t.$,e=t.dom.add(document.body,"iframe",{style:{overflow:"hidden",position:"fixed","z-index":99998,top:"14px",right:"14px",width:"310px",height:"calc(100vh - 28px)","background-color":"#fff","border-radius":"4px","box-shadow":"rgba(0, 0, 0, 0.6) 0px 0px 2px 0px, rgba(0, 0, 0, 0.08) 0px 2px 18px 0px",border:"none"},name:"kContentSearch",id:"kContentSearch",title:"kContentSearch",src:this.getUrl()});this.$container=n(e),this.addEvents()},t.prototype.getUrl=function(){var t=new URL(this.kContentSearchsettings.url);return t.searchParams.append("service_type",this.kContentSearchsettings.service_type),t.searchParams.append("content_type",this.getContentTypeSetting()),t.href},t.prototype.getContentTypeSetting=function(){var t=this.kContentSearchsettings.content_type,n="string"==typeof t?t.split(","):["music","video","movie","book","tv","play","exhibition","person"];return Object(k.a)("video")||(n=n.filter(function(t){return"video"!==t})),n.join(",")},t.prototype.addEvents=function(){var t=this;this.editor.on("SelectionChange",function(){"BODY"!==t.editor.selection.getNode().nodeName&&(t.lastCursorLocation=t.editor.selection.getRng())}),window.addEventListener("message",function(n){if(t.kContentSearchsettings.url.includes(n.origin)){var e=n.data;"close"===e.type&&e.payload?t.toggle(!1):"insertContent"===e.type&&(t.editor.selection.setRng(t.lastCursorLocation),t.editor.execCommand("InsertHTMLByCDM_"+e.payload.type,e.payload))}})},t}(),D=function(t){new T(t).register(),new O(t).register();var n=new w(t),e=t.settings&&t.settings.kContentSearch,r=e&&e.use_text_menu||!1;t.addButton("kContentSearch",{icon:"contentSearch"+(r?"-text":""),cmd:"kContentSearchToggleSidePanel",tooltip:"글감검색"}),t.addCommand("kContentSearchToggleSidePanel",function(){n.toggle()})};window.tinymce.PluginManager.add("kContentSearch",D)}});