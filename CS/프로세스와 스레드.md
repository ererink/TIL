# 프로세스와 스레드 Process & Thread



![](https://blog.kakaocdn.net/dn/1a90O/btrW1O83NIC/dnINrmirM11KaexnKKKip0/img.jpg)

## 

## 프로세스란?

**프로그램을 메모리 상에서 실행중인 작업**을 뜻한다.

컴퓨터에서 연속적으로 실행되고 있는 컴퓨터 프로그램이다.

운영체제로부터 시스템 자원을 할당받는 작업의 단위이다. 

즉, 동적인 개념으로는 **실행된 프로그램**을 의미한다.



실행되고 있는 프로그램의 인스턴스이며, 이는 독립적인 개체이다. 

다시 말해, 프로세스는 각 별도의 주소공간을 할당하고 있다. 



할당받는 시스템 자원의 예로, 

- CPU 시간
- 운영되기 위해 필요한 주소 공간
- Code, Data, Stack, Heap 구조로 되어 있는 독립된 메모리 영역이다.

### 

### 구조

- Code : 코드 자체를 구성하는 **메모리 영역**(프로그램 명령)
- Data : 전역변수, 정적변수, 배열 등
  - 초기화 된 데이터는 data 영역에 저장
  - 초기화 되지 않은 데이터는 bss 영역에 저장
- Heap : 동적 할당 시 사용 (new(), malloc() 등)
- Stack : 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)

### 

### 특징

- 독립된 메모리 영역을 할당받는다.
- 프로세스당 최소 1개의 스레드를 가지고 있다. 
- 각 프로세스는 별도의 주소 공간에서 실행된다.
  - 한 프로세스는 다른 프로세스의 변수나 자료구조에 접근할 수 없다.
- 한 프로세스가 다른 프로세스의 자원에 접근하려면 프로세스 간의 통신이 필요하다.
  - IPC, inter-process communication
  - 파이프, 파일, 소켓을 이용한 통신 방법  

## 

## 스레드란?

프로세스 안에서 실행되는 **여러 흐름 단위**를 뜻한다.

**프로세스의 특정한 수행 경로**이며, 프로세스가 할당받은 자원을 이용하는 실행 단위이다.

**스레드는 Stack만 따로 할당 받고 나머지 영역은 서로 공유한다.**

### 

### 특징

- 각 Stack만 따로 할당받고 Code, Data, Heap 영역은 공유한다.
- 스레드는 한 프로세스 내에서 동작되는 여러 실행의 흐름으로, 프로세스 내의 주소 공간이나 자원들(힙 공간 등)을 같은 프로세스 내에 **스레드끼리 공유**하면서 실행된다.
- 같은 프로세스 안에 있는 여러 스레드들은 같은 힙 공간을 공유한다.   
  - **프로세스는 다른 프로세스의 메모리에 직접 접근할 수 없다.**
- 각의 스레드는 별도의 레지스터와 스택을 갖고 있지만, 힙 메모리는 서로 읽고 쓸 수 있다.
- 한 스레드가 프로세스 자원을 변경하면, 다른 이웃 스레드(sibling thread)도 그 변경 결과를 즉시 볼 수 있다.  

하나의 프로세스가 생성될 때, 기본적으로 하나의 스레드를 같이 생성한다.

**프로세스는 자신만의 고유 공간과 자원을 할당받아 사용**하는데 반해, 

**스레드는 다른 스레드와 공간, 자원을 공유하면서 사용**하는 차이가 존재한다.

## 

## 멀티프로세스

하나의 프로그램을 **여러개의 프로세스로 구성**하여 각 프로세스가 **병렬적으로 작업을 수행**하는 것이다.

### 

### 장점

- 안전성
  - 메모리 침범 문제를 OS 차원에서 해결하기 때문에
  - 여러 개의 자식 프로세스 중 하나에 문제가 발생하면 그 자식 프로세스만 죽는 것 이상으로 **다른 영향이 확산되지 않는다.**  



### 단점

- 작업량 많을 수록 오버헤드 발생
  - 각각 독립된 메모리 영역을 갖고 있기 때문에
- Context Switching으로 인한 성능 저하
  - Context Switching: 프로세스의 상태 정보를 저장하고 복원하는 일련의 과정
    - 동작 중인 프로세스가 대기하면서 해당 프로세스의 상태를 보관하고, 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스 상태를 복구하는 과정
    - 프로세스는 각 독립된 메모리 영역을 할당받아 사용되므로 **캐시 메모리 초기화와 같은 무거운 작업이 진행되었을 때 오버헤드가 발생할 문제가 존재**



## 멀티스레드

하나의 응용 프로그램에서 **여러 스레드를 구성해** 각 스레드가 **하나의 작업을 처리**하는 것이다.

스레드들이 **공유 메모리**를 통해 다수의 작업을 동시에 처리하도록 해준다.



### 장점

- 독립적인 프로세스에 비해 공유 메모리만큼의 시간, 자원 손실이 감소
- 전역 변수와 정적 변수에 대한 자료 공유 가능

### 

### 단점

- 안전성이 떨어짐
  - 하나의 스레드가 데이터 공간 망가지면, 모든 스레드가 작동 불능 상태
    - 공유 메모리를 갖기 때문이다.
  - **Critical Section** 기법으로 보완한다.  
    - 하나의 스레드가 공유 데이터 값을 변경하는 시점에 다른 스레드가 그 값을 읽으려할 때 발생하는 문제를 해결하기 위한 동기화 과정


